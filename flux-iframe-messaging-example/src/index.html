<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>App</title>
  </head>
  <body>
    <h1>Hello, App</h1>
    <iframe src="iframe.html" width="0" height="0"></iframe>
    <script charset="utf-8">
      // Wait for app and iframe to be loaded
      document.addEventListener('DOMContentLoaded', () => {
        // Listen for messages from iframe
        window.onmessage = message => {
          console.log('App received', message.data)
        };
        // Capture reference to iframe
        const iframe = document.getElementsByTagName('iframe')[0].contentWindow;
        // Wait for iframe to be ready to receive messages
        iframe.onload = () => {
          // Send a message to iframe
          iframe.postMessage('Hello, IFrame');
        };
      });
    </script>
  </body>
</html>
